(e=>{"use strict";function t(e,t,r){o(this,{_id:{value:v()},[j]:{value:{}},[A]:{value:[]},[V]:{value:[]},[$]:{get:()=>this},[P]:{value:[]},_trendClear:{writable:!0,value:0}}),e.hasOwnProperty("_id")||i(e,"_id",{value:this._id}),t&&o(this,{_host:{writable:!0,value:t},_hostkey:{writable:!0,value:r}});let a=Object.keys(e);"array"===u(e)&&!a.includes("length")&&a.push("length");let s=new Proxy(this,U);return a.forEach(t=>{let{get:r,set:a,value:n}=Object.getOwnPropertyDescriptor(e,t);r||a?i(this,t,{get:r,set:a}):this[t]=F(n,s,t)}),s}let r=e.$,a=r.fn,s={};e.tagDatabase=s;const{assign:n,create:l,defineProperty:i,defineProperties:o}=Object;let h=e=>void 0!==e&&null!==e;const d=(e,t)=>{if(!e.getAttribute)return!1;let r=e.getAttribute(t);return null!==r&&void 0!==r||void 0};let c=Object.prototype.toString;const u=e=>c.call(e).toLowerCase().replace(/(\[object )|(])/g,""),p=(e,t)=>Array.from(e).forEach(t),v=()=>Math.random().toString(32).substr(2),f=((()=>{let e=!1,t=[]})(),v(),v()+"_xhearobj"),y=v()+"_attached",m=e=>{let t=e.tagName.toLowerCase();return s[t]},w=e=>{let t=e[f],r=l(t);return t._pausedEmit=1,r.push(e),delete t._pausedEmit,r},x=e=>1==e.length&&e[0][f]?w(e[0]):(e=>{let t=l(b);return t.splice(-1,0,...e),e.prevObject&&(t.prevObject=e.prevObject),t})(e),g=e=>{e.is("[xv-ele]")&&e.each((e,t)=>{O(t)}),r("[xv-ele]",Array.from(e)).each((e,t)=>{O(t)})};let b=l(a),k=100;const _=e=>{let{tag:t}=e,r={};Object.keys(e).forEach(t=>{/\D/.test(t)&&(r[t]=e[t])}),delete r.tag,delete r.length;let a=E(`<${t} xv-ele xv-rid="${e._id}"></${t}>`);return n(a,r),Array.from(e).forEach(e=>{a.append(_(e))}),a},N=(e,t)=>{e.hide(),e.empty(),t.forEach(t=>{e.append(_(t))}),e.show()},O=e=>{if(!d(e,"xv-ele"))return;let t=m(e);if(!t)return void console.warn("no exist tag",e);let a=r(e),s=Array.from(e.childNodes);e.innerHTML=t.temp;let l=++k,o=new t.XHear({}),c=new Proxy(o,U);e[f]=c;let p=w(e);a.removeAttr("xv-ele").attr("xv-render",l),a.find("*").attr("xv-shadow",l),r(`[xv-ele][xv-shadow="${l}"]`,e).each((e,t)=>{O(t)}),r(`xv-span[xv-shadow="${l}"]`,e).each((e,t)=>{var r=document.createTextNode("");t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t);var a=t.getAttribute("svkey");c.watch(a,e=>{r.textContent=e})});let v=r(`[xv-content][xv-shadow="${l}"]`,e);if(0 in v&&(i(c,"$content",{enumerable:!0,get:()=>x(v)}),v.prop("svParent",e),v.append(s),t.childChange)){let r=new MutationObserver(r=>{r.forEach(r=>{let{addedNodes:a,removedNodes:s}=r,n={};0 in a&&(n.addedNodes=Array.from(a)),0 in s&&(n.removedNodes=Array.from(s)),t.childChange(w(e),n)})});r.observe(v[0],{attributes:!1,childList:!0,characterData:!1,subtree:!1}),c.__obs=r}r(`[xv-tar][xv-shadow="${l}"]`,e).each((e,t)=>{let a=r(t).attr("xv-tar");i(c,"$"+a,{enumerable:!0,get:()=>x([t])})});let g=n({},t.data);t.attrs.forEach(e=>{let t=a.attr(e);h(t)&&(g[e]=t),c.watch(e,t=>{a.attr(e,t)})}),t.props.forEach(e=>{let t=a.attr(e);h(t)&&(g[e]=t)}),r(`[xv-module][xv-shadow="${l}"]`,e).each((e,t)=>{let a=r(t),s=a.attr("xv-module");c.watch(s,e=>{t.value=e}),t[f]?t[f].watch("value",e=>{c[s]=e}):a.on("change input",e=>{c[s]=t.value})}),a.removeAttr("xv-ele").attr("xv-render",l);let b=t.watch;if(b)for(let e in b)e in g||(g[e]=void 0);p.watch("render",(e,t)=>{let{trend:r}=t;if("new"===t.type||r&&1===r.keys.length)return void N(p,e);let{target:a,key:s,value:n}=L(p,r),l=p.find(`[xv-rid="${a._id}"]`);if("array-method"==r.type){switch(r.methodName){case"fill":case"reverse":case"sort":return void N(l,a)}let e,t,s;switch(r.methodName){case"splice":[e,t,...s]=r.args;break;case"shift":e=0,t=1,s=[];break;case"unshfit":e=0,t=0,s=r.args;break;case"push":e=l.children().length,t=0,s=r.args;break;case"pop":e=l.children().length,t=1,s=[]}let n=e+t;t>0&&l.children().each((t,r)=>{t>=e&&t<n&&E(r).remove()});let i=l.children().eq(e);s.forEach(e=>{let t=_(e);0 in i?i.before(t):l.append(t)})}else if(/\D/.test(s)){p.find(`[xv-rid="${a._id}"]`)[s]=n}else{let{oldVal:e}=r,t=e._id;if(t){let e=p.find(`[xv-rid="${t}"]`);e.after(_(n)),e.remove()}else{let e=_(n);if(a._host._id===p._id)p.append(e);else{p.find(`[xv-rid="${a._id}"]`).append(_(n))}}}});let j=Object.keys(g);if(j.includes("value")||j.push("value"),j.includes("render")||j.push("render"),o._exkeys=j,b)for(let e in b){let t,r,a=b[e];switch(u(a)){case"function":r=a;break;case"object":t=a.get,r=a.set}t&&watchGetter(c,e,t.bind(p)),r&&c.watch(e,r.bind(p))}i(e,"value",{get:()=>c.value,set(e){c.value=e}});for(let e in g)h(g[e])&&(c[e]=g[e]);t.inited&&t.inited.call(e,p),t.attached&&e.getRootNode()===document&&!e[y]&&(t.attached.call(e,p),e[y]=1)};let E=function(...e){let t=r(...e),[a,s]=e;("string"==u(a)&&a.search("<")>-1||a instanceof Element)&&g(t);let n;return s&&(s.getAttribute?n=s.getAttribute("xv-shadow"):s.attr&&(n=s.attr("xv-shadow"))),t=n?G(t,n):G(t),t=x(t)};E.prototype=a,n(E,{init:(...e)=>x(e)},r);const j="_events_"+v(),A="_trend_"+v(),$="_getxdata_"+v(),V="_syncs_"+v(),P="_listen_"+v();let S;(()=>{let e=[],t=0;S=(r=>{e.push(r),t||setTimeout(()=>{t=0;let r=e;e=[],r.forEach(e=>e())},5e3),t=1})})();let C=e=>e instanceof Object?JSON.parse(JSON.stringify(e)):e;const D=e=>e instanceof t,R=(e,t)=>e[j][t]||(e[j][t]=[]),T=(e,t,r)=>{R(e,t).forEach(t=>{t.apply(e,r)})};let L=(e,t)=>{let r,a=t.keys.length-1;t.keys.forEach((t,s)=>{s<a&&(e=e[t]),r=t});let s={type:t.type,add:t.add,remove:t.remove},l=e[r];switch(t.type){case"new":case"update":case"delete":n(s,{target:e,key:r,value:a>=0?l:void 0}),void 0!==t.oldVal&&(s.oldVal=t.oldVal);break;case"sort":n(s,{target:a>=0?l:e,sort:t.sort});break;case"array-method":n(s,{target:a>=0?l:e,args:t.args,methodName:t.methodName,returnValue:t.returnValue})}return s};const J=(e,t)=>{e._pausedEmit=1,t(),delete e._pausedEmit},M=(e,t,r)=>{let a=[];void 0===r?e.hasOwnProperty(t)&&a.push(e):e[t]==r&&a.push(e);for(let s in e){let n=e[s];if(D(n)){M(n,t,r).forEach(e=>{a.includes(e)||a.push(e)})}}return a},H=e=>{let{target:t,key:r,value:a,oldVal:s,type:l,trendData:o}=e;if(t._pausedEmit)return;let h=(e=>{let t=C(e);return e.args&&(t.args=e.args.slice()),e.returnValue&&i(t,"returnValue",{value:e.returnValue}),void 0!==e.oldVal&&i(t,"oldVal",{value:e.oldVal}),e.add&&i(t,"add",{value:e.add}),e.remove&&i(t,"remove",{value:e.remove}),t})(o);if(void 0!==r)h.keys.unshift(r),T(t,"watch-"+r,[a,{oldVal:s,type:l,trend:h}]),T(t,"watch-",[{key:r,val:a,type:l,oldVal:s,trend:h}]);else{let e={type:l,trend:h};switch(o.type){case"sort":n(e,{sort:h.sort});break;case"array-method":n(e,{args:h.args,methodName:h.methodName,returnValue:h.returnValue})}T(t,"watch-",[e])}let{_host:d,_hostkey:c}=t;d&&H({target:d,key:c,value:t,oldVal:t,type:"update",trendData:h})};let q=Array.prototype;const I=e=>{let{xdata:t,key:r,value:a,receiver:s,type:l,tid:h,sort:d,args:c,methodName:u}=e;if(h=h||v(),t[A].includes(h))return;((e,t)=>{e[A].push(t),e._trendClear||(e._trendClear=1,S(()=>{e[A].length=0,e._trendClear=0}))})(t,h);let p={tid:h,type:l=l||(t.hasOwnProperty(r)?"update":"new"),keys:[]};o(p,{add:{value:[]},remove:{value:[]}});let f={target:s,key:r,type:l,trendData:p},y=!0;switch(l){case"new":case"update":if((m=t[r])===a)return;if(D(m)&&m.string===JSON.stringify(a))return;let o=F(a,s,r);t._exkeys&&t._exkeys.includes(r)?t[r]=o:Reflect.set(t,r,o,s),p.val=a,i(p,"oldVal",{value:m}),D(m)&&p.remove.push(m),D(o)&&p.add.push(o),n(f,{value:t[r],oldVal:m});break;case"delete":var m=t[r];D(m)&&p.remove.push(m),delete t[r],n(f,{oldVal:m});break;case"sort":!e.isRunned&&J(t,()=>{let e=t.slice();d.forEach((t,r)=>{s[t]=e[r]})}),p.sort=d;break;case"array-method":J(t,()=>{let e;switch("fill"===u&&(e=s.slice()),y=q[u].apply(s,c),i(p,"returnValue",{value:y}),u){case"splice":y.forEach(e=>{D(e)&&p.remove.push(e)});let[,,...t]=c;t.forEach(e=>{let t=s.seek(e._id);t&&p.add.push(t)});break;case"pop":case"shift":D(y)&&p.remove.push(y);break;case"unshift":case"push":c.forEach(e=>{let t=s.seek(e._id);t&&p.add.push(t)});break;case"fill":e.forEach(e=>{D(e)&&p.remove.push(e)}),s.forEach(e=>{D(e)&&p.add.push(e)})}}),n(p,{args:c,methodName:u})}return H(f),y},U={set:(e,t,r,a)=>/^_.+/.test(t)?Reflect.set(e,t,r,a):(I({xdata:e,key:t,value:r,receiver:a}),!0),deleteProperty:(e,t)=>/^_.+/.test(t)?Reflect.deleteProperty(e,t):(I({xdata:e,key:t,receiver:e,type:"delete"}),!0)};let W=Object.create(q);o(W,{string:{get(){return JSON.stringify(this)}},object:{get(){return C(this)}},root:{get(){let e,t=this._host;for(;t;)e=t,t=t._host;return e}},keylist:{get(){let e=this,t=[];for(;e._host;)t.unshift(e._hostkey),e=e._host;return t}}});let B={entrend(e){let{target:t,key:r,value:a,sort:s,args:l,methodName:i}=L(this,e),o={xdata:t[$],receiver:t,type:e.type,tid:e.tid};switch(e.type){case"new":case"update":case"delete":n(o,{key:r,value:e.val});break;case"sort":n(o,{sort:s});break;case"array-method":n(o,{methodName:i,args:l})}I(o)},detrend(e){return L(this,e)},watch(e,t){let r=u(e);if("object"===r){for(let t in e)this.watch(t,e[t]);return this}return r.search("function")>-1&&(t=e,e=""),((e,t,r)=>R(e,t).push(r))(this,"watch-"+e,t),this},unwatch(e,t){let r=u(e);if("object"===r){for(let t in e)this.unwatch(t,e[t]);return this}return r.search("function")>-1&&(t=e,e=""),((e,t,r)=>{let a=R(e,t),s=a.indexOf(r);a.splice(s,1)})(this,"watch-"+e,t),this},sync(e,t){let r,a;switch(u(t)){case"object":let s={};for(let e in t)s[t[e]]=e;r=(e=>{let t=C(e.trend),r=s[e.key];void 0!==r&&(t.keys[0]=r,this.entrend(t))}),a=(r=>{let a=C(r.trend),s=t[r.key];void 0!==s&&(a.keys[0]=s,e.entrend(a))});break;case"array":r=(e=>{t.includes(e.key)&&this.entrend(C(e.trend))}),a=(r=>{t.includes(r.key)&&e.entrend(C(r.trend))});break;case"string":r=(e=>{e.key===t&&this.entrend(C(e.trend))}),a=(r=>{r.key===t&&e.entrend(C(r.trend))});break;default:r=(e=>this.entrend(C(e.trend))),a=(t=>e.entrend(C(t.trend)))}e.watch(r),this.watch(a);let s=v();return e[V].push({bid:s,options:t,opp:this,func:r}),this[V].push({bid:s,options:t,opp:e,func:a}),this},unsync(e,t){let r=this[V].findIndex(r=>r.opp===e&&r.options===t);if(r>-1){let t=this[V][r],a=e[V].findIndex(e=>e.bid===t.bid),s=e[V][a];this.unwatch(t.func),e.unwatch(s.func),this[V].splice(r,1),e[V].splice(a,1)}else console.log("not found =>",e);return this},seek(e){let t,r=e.match(/\[.+?\]/g);return r?r.forEach((e,r)=>{let[a,s]=e.replace(/[\[]|[\]]/g,"").split("="),n=M(this,a,s);if(0===r)t=n;else{let e=[];n.forEach(r=>{t.includes(r)&&e.push(r)}),t=e}}):t=M(this,"_id",e)[0],t},listen(e,t,r,a=10){let s,n=u(e);if(n.search("function")>-1)r=e,e=null,t=null;else if("string"===n||"number"==n)if(/\[.+\]/.test(e))r=t,t=e,e=null;else{u(t).search("function")>-1&&(r=t,t=null)}let l,i,o=[],h=[];if(t)if(e){let r=this[e];D(r)&&(i=JSON.stringify(r.seek(t).map(e=>e._id)))}else i=JSON.stringify(this.seek(t).map(e=>e._id));return this.watch(s=(s=>{if(t){let n,o;if(e){let r=this[e];if(e!=s.trend.keys[0]||!D(r))return;o=(n=r.seek(t)).map(e=>e._id)}else o=(n=this.seek(t)).map(e=>e._id);JSON.stringify(o)!==i&&(clearTimeout(l),l=setTimeout(()=>{r(n)},a))}else{if(e&&e!=s.trend.keys[0])return;clearTimeout(l),o.push(...s.trend.add),h.push(...s.trend.remove),l=setTimeout(()=>{r({add:o,remove:h}),o=[],h=[]},a)}})),this[P].push({callback:r,watchFunc:s}),this},unlisten(e){let t;return this[P].forEach((r,a)=>{if(r.callback===e){let{watchFunc:e}=r;t=a,this.unwatch(e)}}),this[P].splice(t,1),this},transData(e){let t={key:"",target:"",targetKey:""};n(t,e);let{key:r,target:a,targetKey:s,trans:l}=t;if(t.trans){let e={};for(let t in l)e[l[t]]=t;this.watch(r,e=>{e=l[e],a[s]=e}),a.watch(s,t=>{t=e[t],this[r]=t})}},clear(...e){let[t]=e;0 in e?"number"===u(t)?this.splice(t,1):delete this[t]:this.host&&delete this.host[this.hostkey]},reset(e){let t=Object.keys(e);return Object.keys(this).forEach(e=>{t.includes(e)||"length"===e||delete this[e]}),n(this,e),this},clone(){return F(this.object)},sort(...e){let t,r=this.map(e=>e._id),a=this[$];J(a,()=>{t=q.sort.apply(this,e)});let s=this.map(e=>e._id),n=[];return r.forEach((e,t)=>{let r=s.indexOf(e);n[t]=r}),I({xdata:a,receiver:this,type:"sort",sort:n,isRunned:1}),t},copyWithin(){throw"can't use copyWithin"}};Object.keys(B).forEach(e=>{i(W,e,{value:B[e]})}),["splice","shift","unshfit","push","pop","fill","reverse"].forEach(e=>{W[e]&&i(W,e,{value(...t){return I({xdata:this[$],receiver:this,type:"array-method",methodName:e,args:t})}})}),t.prototype=W;const F=(e,r,a)=>{if(D(e))return e._host=r,e._hostkey=a,e;switch(u(e)){case"array":case"object":return new t(e,r,a)}return e};E.xdata=(e=>F(e)),E.detrend=L;let K=Object.create(b);K.svRender=!0;for(let e in B)i(K,e,{value:B[e]});i(K,"set",{value(e,t){-1===this._exkeys.indexOf(e)&&this._exkeys.push(e),this[e]=t}});const X=e=>{let a={tag:"",temp:"",attrs:[],props:[],data:{},watch:{}};n(a,e);let{proto:o,props:h,temp:d,tag:c}=a;h.push("value");let u=function(...e){t.apply(this,e)},p=K;if(o){p=l(K);for(let e in o){let{get:t,set:r}=Object.getOwnPropertyDescriptor(o,e);t||r?i(p,e,{set:r,get:t}):p[e]=o[e]}}u.prototype=p;var v=(d=d.replace(/<!--.+?-->/g,"")).match(/{{.+?}}/g);v&&v.forEach(e=>{var t=/{{(.+?)}}/.exec(e);t&&(d=d.replace(e,`<xv-span svkey="${t[1].trim()}"></xv-span>`))}),s[c]=n({},a,{XHear:u,temp:d}),r(a.tag+"[xv-ele]").each((e,t)=>{O(t)})};E.register=X;const G=(e,t)=>{let a=0,s=[],{prevObject:n}=e;return t?e.each((e,r)=>{d(r,"xv-shadow")&&r.getAttribute("xv-shadow")==t&&(s.push(r),a=1)}):e.each((e,t)=>{d(t,"xv-shadow")?a=1:s.push(t)}),a&&(e=r(s),n&&(e.prevObject=n)),e},z=(e,t)=>{let r=e[0].tagName.toLowerCase(),a=s[r],n=new Set([...Object.keys(a.data),...a.props,...a.attrs]);p(n,r=>{e[r]=t[r]})},Q=e=>{let t=e.attr("xv-render");t&&(e.find(`[xv-shadow="${t}"]:not([xv-content])`).remove(),e.find(`[xv-shadow="${t}"][xv-content]`).each((e,t)=>{r(t).before(t.childNodes).remove()}));e.find("[xv-render]").each((e,t)=>{Q(r(t))})},Y=(e,t)=>{let a=u(t);if(e.is("[xv-shadow]")){let s=e.attr("xv-shadow");if("string"==a&&t.search("<")>-1){let e=r(t);e.attr("xv-shadow",s),e.find("*").attr("xv-shadow",s),t="",p(e,e=>{t+=e.outerHTML})}else a instanceof Element?r(t).attr("xv-shadow",s):t instanceof E&&r(Array.from(t)).attr("xv-shadow",s)}return t},Z=e=>(e.is("[xv-render]")&&(e=e.map((e,t)=>{let r=t,a=t[f];for(;a&&a.$content;)a=(r=a.$content[0]).xvData;return r})),e);n(b,{add(...t){let r=t[0];if(r instanceof e.$&&r.is("xv-shadow"))throw"shadow element can't use add";return a.add.apply(this,t)},attr(...e){let[t,s]=e;return s&&this.is("[xv-render]")?(this.each((n,l)=>{let i=m(l);i&&i.attrs.indexOf(t)>-1?l[f][t]=s:a.attr.apply(r(l),e)}),this):a.attr.apply(this,e)},clone(...e){if(this.is("[xv-shadow]"))throw"shadow element can't use clone";if(this.svRender){let e=this.html(),t=r(`<div>${e}</div>`);t.find("[xv-render]").each((e,t)=>{r(t).removeAttr("xv-render").attr("xv-ele","")}),e=t.html();this[0].tagName.toLowerCase();let a=this[0].cloneNode();r(a).removeAttr("xv-render").attr("xv-ele","").html(e),O(a);let s=w(a);z(s,this);let n=r("[xv-render]:not([xv-shadow])",this);if(0 in n){let e=r("[xv-render]:not([xv-shadow])",s);e.length==n.length&&e.each((e,t)=>{let r=n[e];if(r.tagName!==t.tagName)return console.warn("cloned xv-ele data does not match"),!1;z(w(t),w(r))})}return s}{let t=this.is("[xv-render]"),s=0 in this.find("[xv-render]");if(t||s){let t=r(Array.from(this)),a=t.clone(...e);Q(a),a.find("[xv-render]").removeAttr("xv-render").attr("xv-ele",""),g(a),t.each((e,t)=>{d(t,"xv-render")&&(a[e]=w(t).clone()[0])});let s=e=>{let r=a.find(e);if(0 in r){let a=t.find(e);r.length==a.length&&a.each((e,t)=>{z(w(r[e]),w(t))})}};return s("[xv-render]:not([xv-shadow])"),s("[xv-render][xv-shadow]"),this.prevObject&&(a.prevObject=this),x(a)}a.clone.apply(this,e)}},empty(){return a.empty.call(Z(this)),this},parent(e){let t=this.map((e,t)=>{let r=t.parentNode;for(;r.svParent;)r=r.svParent;return r}),r=x(Array.from(new Set(t)));return e&&(r=r.filter(e)),r},parents(e){let t=[];this.each((e,r)=>{let a=r.parentNode;for(;a&&a!==document;){for(;a.svParent;)a=a.svParent;t.push(a),a=a.parentNode}});let r=x(Array.from(new Set(t)));return e&&(r=r.filter(e)),r},parentsUntil(e){let t=[];return this.each((a,s)=>{let n=s.parentNode;for(;n&&n!==document;){for(;n.svParent;)n=n.svParent;if(e&&r(n).is(e))break;t.push(n),n=n.parentNode}}),x(new Set(t))},unwrap(){let e=r(this).parent();return e.is("[xv-content]")?e.each((e,t)=>{let{svParent:a}=t;a=r(a?a:t);let s=t.childNodes;p(s,e=>{a.before(e)}),a.remove()}):a.unwrap.call(this),this},findReal(...e){return x(a.find.apply(this,e))},findShadow(...e){let t=a.find.apply(this,e);return t=G(t,this.attr("xv-render")),x(t)}}),p(["after","before","wrap","wrapAll","replaceWith"],e=>{let t=a[e];t&&(b[e]=function(e){return t.call(this,Y(this,e)),g(this.parent()),this})}),p(["insertAfter","insertBefore","replaceAll"],e=>{let t=a[e];t&&(b[e]=function(a){if(this.is("[xv-shadow]"))throw"shadow element can't use "+e;return t.call(Y(r(a),this),a),this})}),p(["append","prepend","wrapInner"],e=>{let t=a[e];t&&(b[e]=function(e){return t.call(Z(this),Y(this,e)),g(this),this})}),p(["appendTo","prependTo"],e=>{let t=a[e];t&&(b[e]=function(a){if(this.is("[xv-shadow]"))throw"shadow element can't use "+e;let s=r(a);return s.is("[xv-shadow]")&&Y(s,this),t.call(this,Z(s)),this})}),p(["find","children"],e=>{let t=a[e];t&&(b[e]=function(e){let r=t.call(Z(this),e);return 1==r.length&&r[0][f]?r=w(r[0]):(r=this.is("[xv-shadow]")?G(r,this.attr("xv-shadow")):G(r),r=x(r)),r})}),p(["eq","first","last","filter","has","not","slice","next","nextAll","nextUntil","prev","prevAll","prevUntil","siblings"],e=>{a[e]&&(b[e]=function(...t){let r=a[e].apply(this,t);return r=x(r)})}),p(["html","text"],e=>{let t=a[e];t&&(b[e]=function(a){let s=this;if((e=>void 0===e)(a)){let e=r(s[0]);if(0 in e.find("[xv-shadow]")){let a=r(e[0].cloneNode(!0));return Q(a),t.call(a)}return t.call(e)}return"text"!==e&&(a=Y(this,a)),s=t.call(Z(this),a),g(this),s})}),(()=>{let{pushStack:e}=a;e&&(b.pushStack=function(...t){return x(e.apply(this,t))})})();const ee={register:X};e.xhear=ee,e.$=E,r(()=>{const e=e=>{if(e[y])return;let t=m(e);t.attached&&t.attached.call(e,w(e)),e[y]=1},t=e=>{if(e.getRootNode()!=document){let t=m(e);t.detached&&t.detached.call(e,w(e)),r("[xv-content]",e).each((e,t)=>{delete t.svParent});let a=e[f];a&&(a.__obs&&a.__obs.disconnect(),delete a.__obs,delete e[f])}};new MutationObserver(a=>{a.forEach(a=>{let{addedNodes:s,removedNodes:n}=a;s&&0 in s&&p(s,t=>{t[f]&&e(t),t instanceof Element&&p(t.querySelectorAll("[xv-render]"),t=>{e(t)})}),n&&0 in n&&p(n,e=>{e[f]&&t(e),r("[xv-render]",e).each((e,r)=>{t(r)})})})}).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),r("[xv-ele]").each((e,t)=>{O(t)})}),r("head").append("<style>[xv-ele]{display:none}</style>")})(window);