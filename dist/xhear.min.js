/*!
* xhear v6.0.0
* https://github.com/kirakiray/Xhear#readme
* 
* (c) 2018-2021 YAO
* Released under the MIT License.
*/(e=>{"use strict";const t=()=>Math.random().toString(32).substr(2);var r=Object.prototype.toString,s=e=>r.call(e).toLowerCase().replace(/(\[object )|(])/g,"");const n=Object.defineProperties,i=Object.getOwnPropertyDescriptor,l=e=>e instanceof y,o=null!==document.currentScript.getAttribute("debug"),c=(()=>{if(o){let e=new Map;return(r,s)=>{s||(s=t());let n=e.get(s);clearTimeout(n),e.set(s,setTimeout(()=>{r(),e.delete(s)}))}}let e=new Map,r=e=>Promise.resolve().then(()=>e());"object"==typeof process&&process.nextTick&&(r=process.nextTick);let s=!1;return(n,i)=>{i||(i=t()),e.set(i,{key:i,fun:n}),s||(s=!0,r(()=>{e.size&&e.forEach(({key:t,fun:r})=>{try{r()}catch(e){console.error(e)}e.delete(t)}),e.clear(),s=!1}))}})(),h=(e,t)=>{Object.keys(t).forEach(r=>{let{get:s,set:n,value:l}=i(t,r);l?e.hasOwnProperty(r)?e[r]=l:Object.defineProperty(e,r,{value:l}):Object.defineProperty(e,r,{get:s,set:n})})},a=(Date.now(),Symbol("self")),u=Symbol("watchs"),p=Symbol("can_update"),g=(e,t)=>{e[u].forEach(e=>e(t)),e.owner.forEach(e=>g(e,t))};class y{constructor(e){if(l(e))return e;let r;e.get?(r=new Proxy(this,{get:e.get,ownKeys:e.ownKeys,getOwnPropertyDescriptor:e.getOwnPropertyDescriptor,set:d.set}),delete e.get,delete e.ownKeys,delete e.getOwnPropertyDescriptor):r=new Proxy(this,d),n(this,{[a]:{value:this},xid:{value:"x_"+t()},owner:{value:new Set},length:{configurable:!0,writable:!0,value:0},[u]:{value:new Map},[p]:{writable:!0,value:0}});let s=-1;return Object.keys(e).forEach(t=>{let r=i(e,t),{value:l,get:o,set:c}=r;"get"!==t&&(/\D/.test(t)||(t=parseInt(t))>s&&(s=t),o||c?n(this,{[t]:r}):this.setData(t,l))}),s>-1&&(this.length=s+1),this[p]=1,r}watch(e){const r="e_"+t();return this[u].set(r,e),r}unwatch(e){return this[u].delete(e)}setData(e,t){if(/^_/.test(e))return n(this,{[e]:{writable:!0,configurable:!0,value:t}}),!0;let r=s(t);"array"!=r&&"object"!=r||(t=new y(t,this)).owner.add(this);const i=this[e];let o=Reflect.set(this,e,t);return this[p]&&g(this,{xid:this.xid,name:"setData",args:[e,t]}),l(i)&&i.owner.delete(this),o}delete(e){if(/^_/.test(e)||"symbol"==typeof e)return Reflect.deleteProperty(this,e);if(!e)return!1;const t=this[a];let r=t[e];l(r)&&r.owner.delete(t);let s=Reflect.deleteProperty(t,e);return g(this,{xid:this.xid,name:"delete",args:[e]}),s}}const d={set:(e,t,r,s)=>"symbol"==typeof t?Reflect.set(e,t,r,s):e.setData(t,r),deleteProperty:function(e,t){return e.delete(t)}};h(y.prototype,{seek(e){let t=[];if(!(e=>s(e).search("function")>-1)(e)){let t=new Function(`with(this){return ${e}}`);e=(e=>{try{return t.call(e,e)}catch(e){}})}return e.call(this,this)&&t.push(this),Object.values(this).forEach(r=>{l(r)&&t.push(...r.seek(e))}),t},watchTick(e){return this.watch((e=>{let t=[];const r=s=>{t.push(s),c(()=>{e(t),t.length=0},r)};return r})(e))},toJSON(){let e={},t=!0,r=0;Object.keys(this).forEach(s=>{let n=this[s];/\D/.test(s)?t=!1:(s=parseInt(s))>r&&(r=s),l(n)&&(n=n.toJSON()),e[s]=n}),t&&(e.length=r+1,e=Array.from(e));const s=this.xid;return n(e,{xid:{get:()=>s}}),e},toString(){return JSON.stringify(this.toJSON())}}),["concat","every","filter","find","findIndex","forEach","map","slice","some","indexOf","lastIndexOf","includes","join"].forEach(e=>{let t=Array.prototype[e];t&&n(y.prototype,{[e]:{value:t}})});const f=Array.prototype.splice;h(y.prototype,{splice(e,t,...r){let n=this[a];r=r.map(e=>{let t=s(e);return"array"!=t&&"object"!=t||(e=new y(e)).owner.add(n),e});let i=f.call(n,e,t,...r);return i.forEach(e=>l(e)&&e.owner.delete(n)),g(this,{xid:this.xid,name:"splice",args:[e,t,...r]}),i},unshift(...e){return this.splice(0,0,...e),this.length},push(...e){return this.splice(this.length,0,...e),this.length},shift(){return this.splice(0,0)[0]},pop(){return this.splice(this.length-1,1)[0]}}),["sort","reverse"].forEach(e=>{const t=Array.prototype[e];t&&n(y.prototype,{[e]:{value(...r){let s=t.apply(this[a],r);return g(this,{xid:this.xid,name:e}),s}}})});const w=e=>e.__xEle__?e.__xEle__:e.__xEle__=new class extends y{constructor(e){super(Object.assign({tag:e.tagName.toLowerCase()},b)),n(this,{ele:{get:()=>e}}),delete this.length}get length(){return this.ele.children.length}get text(){return this.ele.textContent}set text(e){this.ele.textContent=e}get html(){return this.ele.innerHTML}set html(e){this.ele.innerHTML=e}$(e){}all(){}}(e),b={get:(e,t,r)=>/\D/.test(t)?Reflect.get(e,t,r):w(e.ele.children[t]),ownKeys(e){let t=Reflect.ownKeys(e),r=e.ele.children.length;for(let e=0;e<r;e++)t.push(String(e));return t},getOwnPropertyDescriptor:(e,t)=>/\D/.test(t)?Reflect.getOwnPropertyDescriptor(e,t):{enumerable:!0,configurable:!0}};e.$=function(e){return e instanceof Element?w(e):"string"==s(e)?w(document.querySelector(e)):void 0}})(window);