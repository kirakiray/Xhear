//! xhear - v7.3.3 https://github.com/kirakiray/Xhear  (c) 2018-2023 YAO
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).$=t()}(this,(function(){"use strict";const e=()=>Math.random().toString(32).slice(2),t=Object.prototype.toString,r=e=>t.call(e).toLowerCase().replace(/(\[object )|(])/g,""),n=e=>{const t=r(e);return"array"===t||"object"===t},s=new Set;function i(t,r=0){let n=null,i=[];return function(...a){i.push(...a),r>0?(clearTimeout(n),n=setTimeout((()=>{t.call(this,i),i=[],n=null}),r)):null===n&&(n=1,function(t){const r=`t-${e()}`;s.add(r),Promise.resolve().then((()=>{s.has(r)&&(t(),s.delete(r))}))}((()=>{t.call(this,i),i=[],n=null})))}}const a=(e,t,r={})=>([...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].forEach((n=>{const s=Object.getOwnPropertyDescriptor(t,n),{configurable:i,enumerable:a,writable:o,get:l,set:c,value:h}=s;"value"in s?e.hasOwnProperty(n)?e[n]=h:Object.defineProperty(e,n,{enumerable:a,configurable:i,writable:o,...r,value:h}):Object.defineProperty(e,n,{enumerable:a,configurable:i,...r,get:l,set:c})})),e);function o(e){try{e.xid}catch(e){return l(e)}return!1}function l(e){const t=e.stack.split(/\\n/)[0].toLowerCase();return!(!t.includes("proxy")||!t.includes("revoked"))}const c=e=>r(e).includes("function"),h=e=>e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));const u=e=>e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),d=(e,t)=>{const r=document.createElement("template");return r.content.append(e.cloneNode()),!!r.content.querySelector(t)};const f=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},p=(e,t)=>e instanceof HTMLTemplateElement?Array.from(e.content.querySelectorAll(t)):Array.from(e.querySelectorAll(t)),{assign:g,freeze:m}=Object;class y{constructor(e){g(this,e),m(this)}hasModified(e){if("array"===this.type)return this.path.includes(this.currentTarget.get(e));const t=e.split(".");if(this.currentTarget===this.target&&this.name===t[0])return!0;const r=_(this,t).indexOf(this.target);if(r>-1){const e=t.slice(r+1);return!e.length||this.name===e[0]}return this.path.includes(this.currentTarget[e])}hasReplaced(e){if("set"!==this.type)return!1;const t=e.split(".");if(this.target===this.currentTarget&&this.name===t[0])return!0;const r=_(this,t).indexOf(this.target);if(r>-1){return t.slice(r+1)[0]===this.name}return!1}}const _=(e,t)=>{const r=[],n=t.slice();let s=e.currentTarget;for(;n.length;){const e=n.shift();s&&(s=s[e]),r.push(s)}return r};class b extends Array{constructor(e){super(...e)}hasModified(e){return this.some((t=>t.hasModified(e)))}hasReplaced(e){return this.some((t=>t.hasReplaced(e)))}}const w=({type:e,currentTarget:t,target:r,name:n,value:s,oldValue:i,args:a,path:o=[]})=>{if(o&&o.includes(t))return void console.warn("Circular references appear");let l={type:e,target:r,name:n,oldValue:i,value:s};if("array"===e&&(delete l.value,l.args=a),t._hasWatchs){const e=new y({currentTarget:t,...l,path:[...o]});t[N].forEach((t=>{t(e)}))}t._update&&t.owner.forEach((e=>{w({currentTarget:e,...l,path:[t,...o]})}))};var v={watch(t){const r="w-"+e();return this[N].set(r,t),r},unwatch(e){return this[N].delete(e)},watchTick(e,t){return this.watch(i((t=>{o(this)||(t=t.filter((e=>{try{e.path.forEach((e=>e.xid))}catch(e){return!1}return!0})),e(new b(t)))}),t||0))}};const x=Symbol("placeholder");const E={},k=Array.prototype;["push","pop","shift","unshift","splice","reverse","sort","fill","copyWithin"].forEach((e=>{k[e]&&(E[e]=function(...t){const r=Array.from(this),s=k[e].apply(this[S],t),{deletedItems:i,addedItems:a}=function(e,t){const r=Array.from(t),n=Array.from(e),s=[],i=new Map,a=e.length;for(let t=0;t<a;t++){const n=e[t],i=r.indexOf(n);i>-1?r[i]=x:s.push(n)}const o=t.length;for(let e=0;e<o;e++){const r=t[e],s=n.indexOf(r);s>-1?n[s]=x:i.set(e,r)}return{deletedItems:s,addedItems:i}}(r,this);for(let[e,t]of a)j(t)?t._owner.push(this):n(t)&&(this.__unupdate=1,this[e]=t,delete this.__unupdate);for(let e of i)R(e,this);return w({type:"array",currentTarget:this,target:this,args:t,name:e,oldValue:r}),s===this[S]?this[L]:s})}));const{defineProperties:T,getOwnPropertyDescriptor:O,entries:A}=Object,S=Symbol("self"),L=Symbol("proxy"),N=Symbol("watchs"),$=Symbol("isxdata"),j=e=>e&&!!e[$];function M(t,r=D){let n,{proxy:s,revoke:i}=Proxy.revocable(this,r);return s._update=1,T(this,{xid:{value:t.xid||e()},_owner:{value:[]},owner:{configurable:!0,get(){return new Set(this._owner)}},[$]:{value:!0},[S]:{configurable:!0,get:()=>this},[L]:{configurable:!0,get:()=>s},[N]:{get:()=>n||(n=new Map)},_hasWatchs:{get:()=>!!n},_revoke:{value:i}}),Object.keys(t).forEach((e=>{const r=O(t,e);let{value:n,get:i,set:a}=r;i||a?T(this,{[e]:r}):s[e]=n})),s}class H extends Array{constructor(e){return super(),M.call(this,e)}revoke(){const e=this[S];e._onrevokes&&(e._onrevokes.forEach((e=>e())),e._onrevokes.length=0),e.__unupdate=1,e[N].clear(),A(this).forEach((([e,t])=>{j(t)&&(this[e]=null)})),e._owner.forEach((e=>{A(e).forEach((([t,r])=>{r===this&&(e[t]=null)}))})),delete e[S],delete e[L],e._revoke()}toJSON(){let e={},t=!0,r=0;Object.keys(this).forEach((n=>{let s=this[n];/\D/.test(n)?t=!1:(n=parseInt(n))>r&&(r=n),j(s)&&(s=s.toJSON()),e[n]=s})),t&&(e.length=r+1,e=Array.from(e));const n=this.xid;return T(e,{xid:{get:()=>n}}),e}toString(){return JSON.stringify(this.toJSON())}extend(e,t){return a(this,e,t)}get(e){if(/\./.test(e)){const t=e.split(".");let r=this;for(let e=0,n=t.length;e<n;e++)try{r=r[t[e]]}catch(n){const s=new Error(`Failed to get data : ${t.slice(0,e).join(".")} \n${n.stack}`);throw Object.assign(s,{error:n,target:r}),s}return r}return this[e]}set(e,t){if(/\./.test(e)){const r=e.split("."),n=r.pop();let s=this;for(let e=0,t=r.length;e<t;e++)try{s=s[r[e]]}catch(t){const n=new Error(`Failed to get data : ${r.slice(0,e).join(".")} \n${t.stack}`);throw Object.assign(n,{error:t,target:s}),n}return s[n]=t}return this[e]=t}}H.prototype.extend({...v,...E},{enumerable:!1});const{defineProperties:C}=Object,P=({target:e,key:t,value:r,receiver:s,type:i,succeed:a})=>{const o=s[t];let l=r;if(j(l)){if(o===r)return!0;l._owner.push(s)}else if(n(r)){const n=Object.getOwnPropertyDescriptor(e,t);n&&!n.hasOwnProperty("value")||(l=new H(r),l._owner.push(s))}const c=o===r;!c&&j(o)&&R(o,s);const h=a(l);return!c&&!e.__unupdate&&w({type:i||"set",target:s,currentTarget:s,name:t,value:r,oldValue:o}),h},R=(e,t)=>{if(j(e)){const r=e._owner.indexOf(t);r>-1?e._owner.splice(r,1):console.error({desc:"This data is wrong, the owner has no boarding object at the time of deletion",target:t,mismatch:e})}},D={set(e,t,r,n){if("symbol"==typeof t)return Reflect.set(e,t,r,n);if(/^_/.test(t))return e.hasOwnProperty(t)?Reflect.set(e,t,r,n):C(e,{[t]:{writable:!0,configurable:!0,value:r}}),!0;try{return P({target:e,key:t,value:r,receiver:n,succeed:r=>Reflect.set(e,t,r,n)})}catch(e){const s=new Error(`failed to set ${t} \n ${e.stack}`);throw Object.assign(s,{key:t,value:r,target:n,error:e}),s}},deleteProperty:(e,t)=>/^_/.test(t)||"symbol"==typeof t?Reflect.deleteProperty(e,t):P({target:e,key:t,value:void 0,receiver:e[L],type:"delete",succeed:()=>Reflect.deleteProperty(e,t)})},B={set:(e,t,r,n)=>/\D/.test(String(t))?D.set(e,t,r,n):Reflect.set(e,t,r,n),get:(e,t,r)=>/\D/.test(String(t))?Reflect.get(e,t,r):Le(e.ele.children[t]),ownKeys(e){let t=Reflect.ownKeys(e),r=e.ele.children.length;for(let e=0;e<r;e++)t.push(String(e));return t},getOwnPropertyDescriptor:(e,t)=>"string"!=typeof t||/\D/.test(t)?Reflect.getOwnPropertyDescriptor(e,t):{enumerable:!0,configurable:!0}},I={render(){}},F=e=>e.__revokes||(e.__revokes=[]),V=(e,t)=>F(e).push(t),q=(e,t,r)=>{const n=`\n${l.toString()}\nconst [$event] = $args;\nconst {data, errCall} = this;\ntry{\n  with(data){\n    return ${e};\n  }\n}catch(error){\n  if(isRevokedErr(error)){\n    return;\n  }\n  if(data.ele && !data.ele.isConnected){\n    return;\n  }\n  if(errCall){\n    const result = errCall(error);\n    if(result !== false){\n      console.error(error);\n    }\n  }\n}\n`;return new Function("...$args",n).bind({data:t,...r})};function W({data:e,target:t,template:r,temps:n,isRenderSelf:s,...i}){const a=r&&r.innerHTML;a&&(t.innerHTML=a);const o=p(t,"xtext"),l=[],c=F(t);o.forEach((t=>{const r=document.createTextNode(""),{parentNode:n}=t;n.insertBefore(r,t),n.removeChild(t);const s=q(t.getAttribute("expr"),e),i=()=>{r.textContent=s()};l.push(i);const a=()=>{f(c,a),f(l,i),f(F(r),a)};c.push(a),V(r,a)}));const h=p(t,"[x-bind-data]");if(s&&d(t,"[x-bind-data]")&&h.unshift(t),h.forEach((r=>{const n=JSON.parse(r.getAttribute("x-bind-data")),s=Le(r);for(let[i,a]of Object.entries(n))a.forEach((n=>{try{const{always:a}=s[i];let o,h=[];const u=()=>{const[r,a]=n,o=q(a,e,{errCall:e=>{const r=`Rendering of target element failed: ${s.ele.outerHTML} \n  ${e.stack}`;return console.error(r),console.error({stack:r,element:s.ele,target:t,error:e}),!1}});h=[r,o];const l=s[i](...h,{actionName:i,target:s,data:e,beforeArgs:n,args:h});return I.render({step:"refresh",args:n,name:i,target:s}),l};let d=()=>{const{revoke:t}=s[i];t&&t({actionName:i,target:s,data:e,beforeArgs:n,args:h,result:o}),f(c,d),f(F(r),d),f(l,u),d=null};a?l.push(u):o=u(),c.push(d),r!==t&&V(r,d)}catch(e){const t=new Error(`Execution of the ${i} method reports an error: ${i}:${n[0]}="${n[1]}"  \n ${e.stack}`);throw t.error=e,t}}));r.removeAttribute("x-bind-data"),r._bindingRendered=!0,r.dispatchEvent(new Event("binding-rendered"))})),t.__render_temps||function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n)||(t.__render_temps=n),l.length){if(t.__render_data&&t.__render_data!==e){const r=new Error("An old listener already exists and the rendering of this element may be wrong");throw Object.assign(r,{element:t,old:t.__render_data,new:e}),r}t.__render_data=e,l.forEach((e=>e()));const r=e.watchTick((t=>{l.length?l.forEach((e=>e())):e.unwatch(r)}))}}const J=e=>{const{tagName:t}=e;if("TEMPLATE"!==t){if(t){const t={};Array.from(e.attributes).forEach((r=>{const n=/(.*):(.+)/.exec(r.name);if(!n)return;let[,s,i]=n;s||(s="prop");(t[s]||(t[s]=[])).push([i,r.value]),e.removeAttribute(r.name)}));Object.keys(t).length&&e.setAttribute("x-bind-data",JSON.stringify(t))}Array.from(e.children).forEach(J)}},z=(e,t,r)=>{const n=Array.from(e.content.querySelectorAll(t));return r&&n.forEach(r),n};let K;const U=t=>{let r={};const n={};z(t,"code",(t=>{const r=e();t.setAttribute("code-id",r),n[r]=t.innerHTML,t.innerHTML=""})),t.innerHTML=t.innerHTML.replace(/{{(.+?)}}/g,((e,t)=>`<xtext expr="${t}"></xtext>`));const s=t.getAttribute("name");if(s){if(t.content.children.length>1){K||(console.warn("Only one child element can be contained within a template element. If multiple child elements appear, the child elements will be rewrapped within a <div> element"),K=1);const e=`wrapper-${s}`;t.innerHTML=`<div ${e} style="display:contents">${t.innerHTML}</div>`,console.warn(`The template "${s}" contains ${t.content.children.length} child elements that have been wrapped in a div element with attribute "${e}".`)}r[s]=t,t.remove()}z(t,"x-fill:not([name])",(t=>{if(t.querySelector("x-fill:not([name])"))throw`Don't fill unnamed x-fills with unnamed x-fill elements!!!\n${t.outerHTML}`;const r=`t${e()}`;t.setAttribute("name",r);const n=document.createElement("template");n.setAttribute("name",r),n.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(n)})),z(t,"x-if,x-else-if,x-else",(e=>{const t=e.children[0];t&&"TEMPLATE"===t.tagName||(e.innerHTML=`<template condition>${e.innerHTML}</template>`)})),z(t,"template",(e=>{r={...r,...U(e)}})),Array.from(t.content.children).forEach((e=>J(e)));for(let[e,r]of Object.entries(n))z(t,`[code-id="${e}"]`,(e=>{e.removeAttribute("code-id"),e.innerHTML=r}));return r},X=e=>c(e)?e():e,Y={prop(...e){let[t,r]=e;if(1===e.length)return this[t];r=X(r),t=h(t),this.set(t,r)},attr(...e){let[t,r]=e;if(1===e.length)return this.ele.getAttribute(t);r=X(r),null===r?this.ele.removeAttribute(t):this.ele.setAttribute(t,r)},class(...e){let[t,r]=e;if(1===e.length)return this.ele.classList.contains(t);r=X(r),r?this.ele.classList.add(t):this.ele.classList.remove(t)}};Y.prop.always=!0,Y.attr.always=!0,Y.class.always=!0,Y.prop.revoke=({target:e,args:t,$ele:r,data:n})=>{const s=t[0];e.set(s,null)};const Z={sync(e,t,r){if(!r)throw"Sync is only allowed within the renderer";[e,t]=r.beforeArgs;const{data:n}=r;if(n.get(t)instanceof Object){const e=`Object values cannot be synchronized using the sync function : ${t}`;throw console.log(e,n),new Error(e)}this[e]=n.get(t);const s=this.watch((r=>{if(r.hasModified(e))try{const r=this.get(e);n.set(t,r)}catch(e){}})),i=n.watch((r=>{if(r.hasModified(t))try{const r=n.get(t);this.set(e,r)}catch(e){}}));return()=>{this.unwatch(s),n.unwatch(i)}}};Z.sync.revoke=e=>{e.result()};const G={on(e,t,r){let n;if(r){const s=r.beforeArgs[1];/[^\d\w_\$\.]/.test(s)||(t=r.data.get(s).bind(r.data)),n=()=>this.ele.removeEventListener(e,t)}return this.ele.addEventListener(e,t),n||this},one(e,t,r){const n=r=>{this.off(e,n),t(r)};return this.on(e,n,r),this},off(e,t){return this.ele.removeEventListener(e,t),this},emit(e,t,r){let n;return e instanceof Event?n=e:e&&(n=new Event(e,{bubbles:!0,...r})),t&&Object.assign(n,t),this.ele.dispatchEvent(n),this}};G.on.revoke=e=>{e.result()};const Q=(e,t,r,...n)=>{const{children:s}=e,i=[];for(let e=t,n=t+r;e<n;e++){const t=s[e];i.push(t)}if(i.forEach((e=>e.remove())),n.length){const r=document.createDocumentFragment();n.forEach((e=>r.append($e(e).ele)));const i=s[t];i?e.insertBefore(r,i):e.appendChild(r)}return i},ee=["push","pop","shift","unshift","splice","reverse","sort","fill","copyWithin"],te={push(...e){const{ele:t}=this;return Q(t,t.children.length,0,...e),w({type:"array",currentTarget:this,target:this,args:e,name:"push"}),t.children.length},pop(...e){const{ele:t}=this,r=Q(t,t.children.length-1,1,...e);return w({type:"array",currentTarget:this,target:this,args:e,name:"pop"}),Le(r[0])},shift(...e){const{ele:t}=this,r=Q(t,0,1,...e);return w({type:"array",currentTarget:this,target:this,args:e,name:"shift"}),Le(r[0])},unshift(...e){const{ele:t}=this;return Q(t,0,0,...e),w({type:"array",currentTarget:this,target:this,args:e,name:"unshift"}),t.children.length},splice(...e){const t=Q(this.ele,...e);return w({type:"array",currentTarget:this,target:this,args:e,name:"splice"}),t.map(Le)},reverse(...e){const t=Array.from(this.ele.childNodes);re.reverse.call(t,...e);const r=document.createDocumentFragment();return t.forEach((e=>{e.__internal=1,r.append(e)})),this.ele.append(r),t.forEach((e=>{delete e.__internal})),w({type:"array",currentTarget:this,target:this,args:e,name:"reverse"}),this},sort(...e){const t=Array.from(this.ele.children).map(Le);re.sort.call(t,...e);const r=document.createDocumentFragment();return t.forEach((e=>{e.ele.__internal=1,r.append(e.ele)})),this.ele.append(r),t.forEach((e=>{delete e.ele.__internal})),w({type:"array",currentTarget:this,target:this,args:e,name:"sort"}),this}},re=Array.prototype;Object.keys(Object.getOwnPropertyDescriptors(re)).forEach((e=>{if("constructor"===e||"length"===e||ee.includes(e))return;const t=re[e];c(t)&&(te[e]=function(...e){return t.apply(Array.from(this.ele.children).map(Le),e)})}));class ne{}for(let[e,t]of Object.entries(te))Object.defineProperty(ne.prototype,e,{value:t});const se=e=>new H(e);Object.assign(se,{is:j});const{defineProperty:ie,assign:ae}=Object,oe=(e,t)=>{const{ele:r}=t;e.forEach((e=>{if(e in r){let n=!1;ie(t,e,{enumerable:!0,get:()=>n?Number(r[e]):r[e],set:t=>{n="number"==typeof t,r[e]=t}})}}))},le=new Set(["input","textarea","select","option","button","label","fieldset","legend","form"]),ce=(e,t={})=>{const{name:r,type:n}=t,{ele:s}=e;let i=s[r];e.on(n,(()=>{w({type:"set",target:e,currentTarget:e,name:r,value:s[r],oldValue:i}),i=s[r]}))},he=e=>{switch(e.attr("type")){case"file":oe(["multiple","files"],e),ce(e,{name:"files",type:"change"});break;case"checkbox":oe(["checked","multiple"],e),ce(e,{name:"checked",type:"change"});break;case"radio":oe(["checked"],e),ce(e,{name:"checked",type:"change"});break;default:oe(["placeholder","value"],e),ce(e,{name:"value",type:"input"})}},ue=(e,t)=>{const r={};return e.all(t).forEach((e=>{const{name:t,tag:n,ele:s}=e;if("input"===n)switch(e.type){case"checkbox":t in r||(r[t]=[]),s.checked&&r[t].push(s.value);break;case"radio":s.checked&&(r[t]=s.value);break;case"file":r[t]=s.files;break;default:r[t]=s.value}else if("textarea"===n)r[t]=s.value;else if("select"===n){const e=p(s,"option:checked");if(s.multiple)r[t]=e.map((e=>e.value||e.textContent));else{const[n]=e;r[t]=n.value||n.textContent}}else r[t]=e.value})),r};var de={formData(e,t={wait:200}){const r=se({});return ae(r,ue(this,e||"input,select,textarea")),this.watchTick((t=>{ae(r,ue(this,e||"input,select,textarea"))}),t.wait),r}};const fe={set:(e,t,r,n)=>(e._ele.style[t]=r,Reflect.set(e,t,r,n),!0),get(e,t,r){if("length"===t)return 0;const{style:n}=e._ele;return Array.from(n).includes(t)?n[t]:getComputedStyle(e._ele)[t]}};class pe{constructor(e){const t={};Object.defineProperty(t,"_ele",{enumerable:!1,get:()=>e.ele});const{style:r}=e.ele;return Array.from(r).forEach((e=>{t[e]=r[e]})),e._css=new Proxy(t,fe)}}var ge={get css(){return new pe(this)},set css(e){if("string"==r(e))return void(this.ele.style=e);let{style:t}=this,n=Object.keys(e);Array.from(t).forEach((e=>{n.includes(e)||(t[e]="")})),Object.assign(t,e)}};const me={},ye=(e={})=>{const t={tag:"",temp:"",data:{},proto:{},...e};let r,n;try{!function(e){if("-"===e.charAt(0)||"-"===e.charAt(e.length-1))throw new Error(`The string "${e}" cannot start or end with "-"`);for(let t=0;t<e.length-1;t++)if("-"===e.charAt(t)&&"-"===e.charAt(t+1))throw new Error(`The string "${e}" cannot have consecutive "-" characters`);if(!e.includes("-"))throw new Error(`The string "${e}" must contain at least one "-"`)}(t.tag),t.data=be(t.data);const e=(s=h(t.tag)).charAt(0).toUpperCase()+s.slice(1);if(me[e])throw`Component ${e} already exists`;r=document.createElement("template"),r.innerHTML=t.temp,n=U(r)}catch(e){const r=new Error(`Register Component Error: ${t.tag} \n  ${e.stack}`);throw r.error=e,r}var s;const i=e=>{let t;return t=e instanceof Array?[...e]:Object.keys(e),t},a=me[name]=class extends HTMLElement{constructor(...e){super(...e);const s=Le(this);if(t.created&&t.created.call(s),t.attrs){const e=i(t.attrs);s.watchTick((t=>{e.forEach((e=>{if(t.hasModified(e)){const t=s[e],r=u(e);null==t?this.removeAttribute(r):this.setAttribute(r,t)}}))}))}(({defaults:e,ele:t,template:r,temps:n})=>{let s;try{const i={...be(e.data),...e.attrs};s=Le(t),e.proto&&s.extend(e.proto,{enumerable:!1});for(let[e,t]of Object.entries(i))s.hasOwnProperty(e)||(s[e]=t);if(e.temp){const e=t.attachShadow({mode:"open"});e.innerHTML=r.innerHTML,W({target:e,data:s,temps:n})}e.ready&&e.ready.call(s)}catch(e){const r=new Error(`Render element error: ${t.tagName} \n  ${e.stack}`);throw r.error=e,r}if(e.watch){const t=Object.entries(e.watch);s.watchTick((e=>{for(let[r,n]of t)e.hasModified(r)&&n.call(s,s[r],{watchers:e})}));for(let[e,r]of t)r.call(s,s[e],{})}})({defaults:t,ele:this,template:r,temps:n})}connectedCallback(){_e(this)||t.attached&&t.attached.call(Le(this))}disconnectedCallback(){_e(this)||t.detached&&t.detached.call(Le(this))}attributeChangedCallback(e,t,r){const n=Le(this);/[^\d.]/.test(r)||"number"!=typeof n[e]||(r=Number(r)),n[h(e)]=r}static get observedAttributes(){return i(t.attrs||{}).map((e=>u(e)))}};if("loading"!==document.readyState)customElements.define(t.tag,a);else{const e="readystatechange";let r;document.addEventListener(e,r=()=>{customElements.define(t.tag,a),document.removeEventListener(e,r)})}};function _e(e){let t=e;for(;t;){if(t.__internal)return!0;if(t=t.parentNode||t.host,!t||t.tagName&&"BODY"===t.tagName)break}return!1}function be(e){if(e instanceof Set||e instanceof Map)throw"The data of the registered component should contain only regular data types such as String, Number, Object and Array. for other data types, please set them after ready.";if(e instanceof Function)throw"Please write the function in the 'proto' property object.";if("object"!=typeof e||null===e)return e;const t=Array.isArray(e)?[]:{};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=be(e[r]));return t}class we extends Comment{constructor(e){const t="Fake Node"+(e?": "+e:"");super(` ${t} --end `),this._mark=e,this._inited=!1;const r=new Comment(` ${t} --start `);r.__fake_end=this,Object.defineProperty(this,"_start",{value:r})}init(){this._inited||(this.parentNode.insertBefore(this._start,this),this._inited=!0)}querySelector(e){return this.__searchEl(e,"find")}querySelectorAll(e){return this.__searchEl(e)}__searchEl(e,t="filter"){const r=this.parentNode;if(!r)return[];const n=this.children;return Array.from(r.querySelectorAll(e))[t]((e=>{let t=e;for(;;){if(n.includes(t))return!0;if(t=t.parentNode,!t)break}}))}insertBefore(e,t){const{parentNode:r}=this;Array.from(r.children).includes(t)?r.insertBefore(e,t):r.insertBefore(e,this)}appendChild(e){this.parentNode.insertBefore(e,this)}get children(){const e=[];let t=this;for(;;){if(t=t.previousSibling,!t)throw"This is an unclosed FakeNode";if(t instanceof HTMLElement)e.unshift(t);else if(t===this._start)break}return e}get childNodes(){const e=[];let t=this;for(;;){if(t=t.previousSibling,!t)throw"This is an unclosed FakeNode";if(t===this._start)break;e.unshift(t)}return e}set innerHTML(e){this.childNodes.forEach((e=>{e.remove()}));const t=document.createElement("template");t.innerHTML=e,Array.from(t.content.childNodes).forEach((e=>{this.appendChild(e)}))}get innerHTML(){const{children:e}=this;let t="";return e.forEach((e=>{t+=e.outerHTML+"\n"})),t}get nextElementSibling(){let e=this.nextSibling;return e.__fake_end?e.__fake_end:(!e||e instanceof Element||(e=e.nextElementSibling),e)}get previousElementSibling(){const{_start:e}=this;let t=e.previousSibling;return t instanceof we?t:e.previousElementSibling}}const ve={data:{value:null,__rendered:!1},watch:{value(){this._bindend&&this.refreshValue()}},proto:{refreshValue(){clearTimeout(this._timer),this._timer=setTimeout((()=>{const e=[this,...this._others];let t=!1;e.forEach((e=>{t?e._clearContent():e.value||"x-else"===e.tag?(t=!0,e._renderContent()):e._clearContent()}))}),0)},_renderContent(){if(this.__rendered)return;this.__rendered=!0;const{target:e,data:t,temps:r}=xe(this._fake);o(t)||(this._fake.innerHTML=this.__originHTML,W({target:e,data:t,temps:r}))},_clearContent(){this.__rendered=!1,je(this._fake),this._fake.innerHTML=""},init(){if(this._bindend)return;this._bindend=!0;const e=this._fake=new we(this.tag);if(this.before(e),e.init(),this.remove(),"x-if"===this.tag){const t=this._others=[];let r=e;for(;r=r.nextElementSibling,r;)switch(r.tagName){case"X-ELSE":{const e=Le(r);return e.init?e.init():e._if_ready=1,void t.push(e)}case"X-ELSE-IF":{const e=Le(r);e._xif=this,t.push(e);break}}}}},created(){this.__originHTML=this.$("template[condition]").html,this.html=""},ready(){this.ele._bindingRendered?this.init():this.one("binding-rendered",(()=>this.init()))}};ye({tag:"x-if",...ve}),ye({tag:"x-else-if",...ve,watch:{value(){this._bindend&&this._xif&&this._xif.refreshValue()}}}),ye({tag:"x-else",...ve,watch:{},ready(){this._if_ready&&this.init()}});const xe=e=>{for(;e&&!e.__render_data;)e=e.parentNode;return e?{target:e,data:e.__render_data,temps:e.__render_temps}:null};ye({tag:"x-fill",data:{value:null},watch:{value(){this.refreshValue()}},proto:{refreshValue(){const e=this.value;if(!this._bindend)return;const t=this._fake.children;if(!e)return t.forEach((e=>je(e))),void(this._fake.innerHTML="");if(!(e instanceof Array))return console.warn(`The value of x-fill component must be of type Array, and the type of the current value is ${getType(e)}`),void(t&&t.forEach((e=>{je(e),e.remove()})));const r=xe(this._fake),n=t.map((e=>e._data_xid)),{data:s,temps:i}=r,a=i[this._name],o=e.length;let l;for(let r=0;r<o;r++){const o=e[r],c=n.indexOf(o.xid);if(c>-1){if(c===r){l=t[r];continue}const e=t[c];Le(e).__item.$index=r,e.__internal=1,0===r?this._fake.insertBefore(e,t[0]):this._fake.insertBefore(e,l.nextElementSibling),l=e,delete e.__internal;continue}const h=Ee(o,i,a,s.$host||s,r);l?this._fake.insertBefore(h.ele,l.nextElementSibling):t.length?this._fake.insertBefore(h.ele,t[0]):this._fake.appendChild(h.ele),l=h.ele}const c=this._fake.children;o<c.length&&c.slice(o).forEach((e=>{e.remove(),je(e)}))},init(){if(this._bindend)return;this._bindend=!0;const e=this._fake=new we("x-fill");this.before(e),e.init(),this.remove(),this.refreshValue()}},ready(){this._name=this.attr("name"),this.ele._bindingRendered?this.init():this.one("binding-rendered",(()=>this.init()))}});const Ee=(e,t,r,n,s)=>{const i=$e(r.innerHTML),a=new H({$data:e,$ele:i,$host:n,$index:s});W({target:i.ele,data:a,temps:t,$host:n,isRenderSelf:!0});const o=i.ele.__revokes,l=()=>{f(o,l),a.revoke()};return o.push(l),i.__item=a,i.ele._data_xid=e.xid,i},{defineProperties:ke}=Object,Te=({_this:e,ele:t,proxySelf:r})=>{const n={owner:{get(){const{parentNode:r}=t,{_owner:n}=e,s=r?[Le(r),...n]:[...n];return new Set(s)}},ele:{get:()=>t}},s=t.tagName&&t.tagName.toLowerCase();s&&(n.tag={enumerable:!0,value:s}),ke(e,n),(e=>{const{tag:t}=e;if(le.has(t))switch(oe(["type","name","disabled"],e),t){case"input":he(e);break;case"textarea":oe(["value"],e),ce(e,{name:"value",type:"input"});break;case"option":oe(["selected","value"],e);break;case"select":oe(["value"],e),ce(e,{name:"value",type:"change"})}})(r)};class Oe extends ne{constructor({ele:e}){super();const t=M.call(this,{},B);return Te({_this:this,ele:e,proxySelf:t}),e.__xhear__=t,t}get length(){return this.ele&&this.ele.children.length}$(e){let{ele:t}=this;t instanceof HTMLTemplateElement&&(t=t.content);const r=t.querySelector(e);return r?Le(r):null}all(e){return p(this.ele,e).map(Le)}extend(e,t){return a(this,e,t)}get text(){return this.ele.textContent}set text(e){this.ele.textContent=e}get html(){return this.ele.innerHTML}set html(e){this.ele.innerHTML=e}get classList(){return this.ele.classList}get data(){return this.ele.dataset}get shadow(){return Le(this.ele.shadowRoot)}get root(){const e=this.ele.getRootNode();return e?Le(e):null}get host(){let e=this.ele.getRootNode(),{host:t}=e;return t instanceof Node?Le(t):null}get parent(){let{parentNode:e}=this.ele;return e&&e!==document?Le(e):null}get parents(){const e=[];let t=this;for(;t.parent;)t=t.parent,e.push(t);return e}get next(){const e=this.ele.nextElementSibling;return e?Le(e):null}after(e){const{next:t}=this;t?t.before(e):this.parent.push(e)}get nexts(){const{parent:e}=this,t=this.index;return e.filter(((e,r)=>r>t))}get prev(){const e=this.ele.previousElementSibling;return e?Le(e):null}before(e){const t=$e(e);this.parent.ele.insertBefore(t.ele,this.ele)}get prevs(){const{parent:e}=this,t=this.index;return e.filter(((e,r)=>r<t))}get siblings(){return this.parent.filter((e=>e!==this))}get index(){let{parentNode:e}=this.ele;return e?Array.prototype.indexOf.call(e.children,this.ele):null}get style(){return this.ele.style}get width(){return parseInt(getComputedStyle(this.ele).width)}get height(){return parseInt(getComputedStyle(this.ele).height)}get clientWidth(){return this.ele.clientWidth}get clientHeight(){return this.ele.clientHeight}get offsetWidth(){return this.ele.offsetWidth}get offsetHeight(){return this.ele.offsetHeight}get outerWidth(){let e=getComputedStyle(this.ele);return this.ele.offsetWidth+parseInt(e["margin-left"])+parseInt(e["margin-right"])}get outerHeight(){let e=getComputedStyle(this.ele);return this.ele.offsetHeight+parseInt(e["margin-top"])+parseInt(e["margin-bottom"])}is(e){return d(this.ele,e)}remove(){this.ele.remove()}clone(e=!0){return Le(this.ele.cloneNode(e))}wrap(e){const t=$e(e),{ele:r}=this;if(!r.parentNode)throw"The target has a sibling element, so you can't use unwrap";return r.parentNode.insertBefore(t.ele,r),r.__internal=1,t.ele.appendChild(r),delete r.__internal,this}unwrap(){const{ele:e}=this,t=e.parentNode;if(t.children.length>1)throw"The element itself must have a parent";return e.__internal=1,t.parentNode.insertBefore(e,t),t.remove(),delete e.__internal,this}}const Ae=H.prototype,Se=Oe.prototype;Se.extend({get:Ae.get,set:Ae.set,toJSON:Ae.toJSON,toString:Ae.toString,...v,...G,...Y,...Z,...de},{enumerable:!1}),Se.extend(ge);const Le=e=>e?e.__xhear__?e.__xhear__:new Oe({ele:e}):null,Ne=document.createElement("template"),$e=(e,t)=>{if(e instanceof Oe)return e;if(e instanceof Node||e===window)return Le(e);switch(r(e)){case"object":return(e=>{const t={...e};if(!e.tag)return null;const r=document.createElement(e.tag);delete t.tag;const n=Le(r);return Object.assign(n,t),n})(e);case"string":return(e=>{Ne.innerHTML=e;const t=Ne.content.children[0]||Ne.content.childNodes[0];return Ne.innerHTML="",Le(t)})(e)}},je=e=>{e.__revokes&&Array.from(e.__revokes).forEach((e=>e&&e())),e.childNodes&&Array.from(e.childNodes).forEach((e=>{je(e)}));const t=e?.shadowRoot?.__revokes;t&&[...t].forEach((e=>e()))};function Me(e){if("string"===r(e)&&!/<.+>/.test(e)){const t=document.querySelector(e);return Le(t)}return $e(e)}return Object.defineProperties(Me,{extensions:{value:{}}}),Object.assign(Me,{stanz:se,render:W,convert:U,register:ye,fn:Oe.prototype,all:e=>p(document,e).map(Le)}),Me}));
//# sourceMappingURL=xhear.min.js.map
