(t=>{let e={};const n=Object.assign;const o=Object.create;const r=Object.defineProperty;()=>{};const s=(t,e)=>{if(!t.getAttribute)return 0;let n=t.getAttribute(e);if(null!==n&&void 0!==n)return 1};let a=Object.prototype.toString;const c=t=>a.call(t).toLowerCase().replace(/(\[object )|(])/g,"");const i=(t,e)=>{t.forEach(e)};const u=(t,e,n=v)=>t[n][e]||(t[n][e]=[]);const f=(t,e,n)=>{let o=u(t,e,l);o.push(n)};const d=()=>Math.random().toString(32).substr(2);(()=>{let t=!1;let e=[];return n=>{t||(t=!0,setTimeout(()=>{for(let t=0;t<e.length;t++)e[t]();e=[];t=!1},0));e.push(n)}})();const h="_"+d();const v=h+"_watchs";const l=h+"_watchs_ori";const p="_svkey"+h;let m=t.$;let b=m.fn;let g=o(b);const w=(()=>b.splice?t=>{let e=o(g);e.splice(-1,0,...t);t.prevObject&&(e.prevObject=t.prevObject);return e}:t=>{let e=o(g);for(let n=t.length,o=0;o<n;o++)e.push(t[o]);t.prevObject&&(e.prevObject=t.prevObject);return e})();const _=t=>{let e=t._svData;let n=o(e);n.push(t);return n};const y=t=>{t.each((t,e)=>{s(e,"sv-ele")&&j(e)});m("[sv-ele]",Array.from(t)).each((t,e)=>{j(e)})};const A=(t,e)=>{let n=0,o=[],{prevObject:prevObject}=t;e?t.each((t,r)=>{s(r,"sv-shadow")&&r.getAttribute("sv-shadow")!=e?n=1:o.push(r)}):t.each((t,e)=>{s(e,"sv-shadow")?n=1:o.push(e)});n&&(t=m(o),prevObject&&(t.prevObject=prevObject));return t};let N=n(o(g),{set(t,e){let n=this;if(0 in n&&n[0]._svData&&(n=n[0]._svData),t in n)return void console.warn("the value exists");let o;r(n,t,{enumerable:!0,get(){return o},set(e){let r=o;o=e;let s=u(n,t),a=u(n,t,l);s.concat(a).forEach(t=>{t(e,r)})}}),n[t]=e},watch(t,e){u(this,t).push(e)},unwatch(t,e){if(t){let n=u(this,t);if(e){let t=n.indexOf(e);n.splice(t,1)}else n.length=0}},svRender:!0});const O=t=>{let n=t.tagName.toLowerCase();return e[n]};const j=t=>{if(s(t,"sv-ele")){let e=O(t);if(!e)return void console.warn("this element is not defined",t);let o=m(t),s=Array.from(t.childNodes);t.innerHTML=e.code;let a=new e.Shear;t._svData=a,m("sv-span",t).each((t,e)=>{var n=document.createTextNode("");e.parentNode.insertBefore(n,e);e.parentNode.removeChild(e);var o=e.getAttribute(p);f(a,o,t=>{n.textContent=t})});let c=m("[sv-content]",t);if(delete c.prevObject,c[0]&&(r(a,"$content",{enumerable:!0,get(){return c[0]._svData?_(c[0]):w(c)}}),c.append(s),c.prop("svParent",t),e.childChange)){let n=new MutationObserver(n=>{n.forEach(n=>{let{addedNodes:addedNodes,removedNodes:removedNodes}=n;let o={};0 in addedNodes&&(o.addedNodes=Array.from(addedNodes));0 in removedNodes&&(o.removedNodes=Array.from(removedNodes));e.childChange(_(t),o)})});n.observe(c[0],{attributes:!1,childList:!0,characterData:!1,subtree:!1}),a._obs=n}m("[sv-tar]",t).each((t,e)=>{let n=m(e).attr("sv-tar");r(a,"$"+n,{enumerable:!0,get(){return e._svData?_(e):w([e])}})});let i={};n(i,e.data),e.attrs.forEach(t=>{let e=o.attr(t);i[t]=e;f(a,t,e=>{o.attr(t,e)})}),e.props.forEach(t=>{let e=o.attr(t);i[t]=e}),m("[sv-module]",t).each((t,e)=>{let n=m(e);let o=n.attr("sv-module");f(a,o,t=>{e.value=t});n.on("input",()=>{a[o]=e.value})});let u=e.watch;if(u)for(let e in u)f(a,e,(...n)=>u[e].apply(_(t),n));let h=e.val;h&&r(t,"value",{get(){return h.get&&h.get.call(_(t))},set(e){return h.set&&h.set.call(_(t),e)}});let v=d();o.removeAttr("sv-ele").attr("sv-render",v),o.find(`[sv-shadow="t"]`).attr("sv-shadow",v);for(let t in i)a.set(t,i[t]);e.rendered&&e.rendered(_(t)),t.getRootNode()===document&&e.attached&&!t._u_attached&&(e.attached(_(t)),t._u_attached=1),m("[sv-ele]",t).each((t,e)=>{j(e)})}};const D=t=>{function s(t={}){r(this,v,{value:{}}),r(this,l,{value:{}})}let a={tag:"",temp:"",attrs:[],props:[],data:{},proto:{}};n(a,t);s.prototype=n(o(N),a.proto);let c=a.temp;c=c.replace(/<!--.+?-->/g,"");var i=c.match(/{{.+?}}/g);i&&i.forEach(t=>{var e=/{{(.+?)}}/.exec(t);e&&(c=c.replace(t,`<sv-span ${p}="${e[1].trim()}"></sv-span>`))});let u=m(`<div>${c}</div>`);u.find("*").attr("sv-shadow","t");c=u.html();e[a.tag]=n({Shear:s,code:c},a);m(a.tag+"[sv-ele]").each((t,e)=>{j(e)})};const E={register:D};t.shear=E;t.$=function(...t){let e=m(...t),[n,o]=t;("string"==c(n)&&n.search("<")>-1||n instanceof Element)&&y(e);let r;return o&&(o.getAttribute?r=o.getAttribute("sv-shadow"):o.attr&&(r=o.attr("sv-shadow"))),e=1==(e=r?A(e,r):A(e)).length&&e[0]._svData?_(e[0]):w(e)};n($,m);$.prototype=$.fn=b;const C=(t,n)=>{let o=t[0].tagName.toLowerCase();let r=e[o];let s=Array.from(new Set([...Object.keys(r.data),...r.props,...r.attrs]));i(s,e=>{t[e]=n[e]})};const L=t=>{let e=t.attr("sv-render");e&&(t.find(`[sv-shadow="${e}"]:not([sv-content])`).remove(),t.find(`[sv-shadow="${e}"][sv-content]`).each((t,e)=>{m(e).before(e.childNodes).remove()}));let n=t.find("[sv-render]");n.each((t,e)=>{L(m(e))})};n(g,{add(...e){let n=e[0];if(n instanceof t.$&&n.is("sv-shadow"))throw"shadow element can't use add";return b.add.apply(this,e)},clone(...t){if(this.is("[sv-shadow]"))throw"shadow element can't use clone";if(this.svRender){let t=this.html(),e=m(`<div>${t}</div>`);e.find("[sv-render]").each((t,e)=>{m(e).removeAttr("sv-render").attr("sv-ele","")}),t=e.html();this[0].tagName.toLowerCase();let n=this[0].cloneNode();m(n).removeAttr("sv-render").attr("sv-ele","").html(t),j(n);let o=_(n);C(o,this);let r=m("[sv-render]:not([sv-shadow])",this);if(0 in r){let t=m("[sv-render]:not([sv-shadow])",o);t.length==r.length&&t.each((t,e)=>{let n=r[t];if(n.tagName!==e.tagName)return console.warn("cloned sv-ele data does not match"),!1;C(_(e),_(n))})}return o}{let e=this.is("[sv-render]"),n=0 in this.find("[sv-render]");if(e||n){let e=m(Array.from(this)),n=e.clone(...t);L(n),n.find("[sv-render]").removeAttr("sv-render").attr("sv-ele",""),y(n),e.each((t,e)=>{s(e,"sv-render")&&(n[t]=_(e).clone()[0])});let o=t=>{let o=n.find(t);if(0 in o){let n=e.find(t);o.length==n.length&&n.each((t,e)=>{C(_(o[t]),_(e))})}};return o("[sv-render]:not([sv-shadow])"),o("[sv-render][sv-shadow]"),this.prevObject&&(n.prevObject=this),w(n)}b.clone.apply(this,t)}},eq(t){let e=b.eq.call(this,t),n=e[0];return n&&n._svData&&(e=_(n)),e},find(t){let e;return e=1==(e=this.svRender&&this.$content?this.$content.find(t):b.find.call(this,t)).length&&e[0]._svData?_(e[0]):this.is("[sv-shadow]")?A(e,this.attr("sv-shadow")):A(e)},parent(...t){let e=b.parent.apply(this,t);if(e.is("[sv-content]")){let t=Array.from(e).map(t=>{let{svParent:svParent}=t;return svParent||t});e=w(t)}return e}});const S=(t,e,n)=>{let o=c(e);t.each((t,r)=>{let a=m(r);let i=s(r,"sv-shadow")&&!s(r,"sv-content");let u=r.getAttribute("sv-shadow");let f=e;"string"===o&&e.search("<")>-1||e instanceof Element?f=m(e):"function"==o&&(f=m(e(t)));"string"!==c(f)&&(y(f),i&&f.attr("sv-shadow",u));let d=r._svData;d&&(a=d.$content);n.call(a,f)})};i(["append","prepend"],t=>{let e=b[t];e&&(g[t]=function(t){let n=this;return S(n,t,e),n})});i(["html","text"],t=>{let e=b[t];e&&(g[t]=function(n){let o=this;if(n)return"html"==t?S(o,n,e):o.each((t,o)=>{let r=m(o);let s=o._svData;s&&(r=s.$content);e.call(r,n)}),o;{let t=m(o[0]);if(0 in t.find("[sv-shadow]")){let n=m(t[0].cloneNode(!0));return L(n),e.call(n)}return e.call(t)}})});(()=>{let{pushStack:pushStack}=b;pushStack&&(g.pushStack=function(...t){return w(pushStack.apply(this,t))})})();m(()=>{m("[sv-ele]").each((t,e)=>{j(e)});const t=t=>{if(t._u_attached)return;let e=O(t);e.attached&&e.attached(_(t));t._u_attached=1};const e=t=>{if(t.getRootNode()!=document){let e=O(t);e.detached&&e.detached(_(t)),m("[sv-content]",t).each((t,e)=>{delete e.svParent});let{_svData:_svData}=t;_svData&&(_svData._obs&&_svData._obs.disconnect(),delete _svData._obs,delete t._svData)}};let n=new MutationObserver(n=>{n.forEach(n=>{let{addedNodes:addedNodes,removedNodes:removedNodes}=n;addedNodes&&0 in addedNodes&&i(Array.from(addedNodes),e=>{e._svData&&t(e);m("[sv-render]",e).each((e,n)=>{t(n)})});removedNodes&&0 in removedNodes&&i(Array.from(removedNodes),t=>{t._svData&&e(t);m("[sv-render]",t).each((t,n)=>{e(n)})})})});n.observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0})});m("head").append("<style>[sv-ele]{display:none}[sv-render]{display:block}</style>")})(window);